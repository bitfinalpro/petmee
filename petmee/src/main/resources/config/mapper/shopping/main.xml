<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.petmee.repository.dao.ShoppingDAO">

	<select id="selectFood" parameterType="int" resultType="Product">
		select * 
			from tb_product
	</select>

	<select id = "shoppingDetail" parameterType="String" resultType="Product">
		select *
			from tb_product
			where product_id = #{productId}
	</select>
	
	<!-- 상품 상세 이미지 파일 --> 
	<select id="selectProductImage" parameterType="String" resultType="Image">
		select img.path, img.ori_name, img.type
			from tb_image img
			inner join tb_product pro
			on img.product_id = pro.product_id
            where pro.product_id = #{productId}
	</select>
	
	<!-- 상품 리스트 -->
	<!--  
	<select id="productList" parameterType="hashmap" resultType="Product">
		select * from tb_product
		where category_no = #{categoryNo} 
		limit 1, 16
	</select>
	-->
	<select id="productList" parameterType="ProductListPage" resultType="Product">
		select * from tb_product
		where category_no = #{categoryNo}
		order by no desc
		limit #{begin}, #{listSize} 
	</select>
	
	<!-- 상품 카운트 리스트 -->
	<select id="productListCount" resultType="int" >
		select count(*)
		from tb_product 
	</select>
	
	<!-- 상품 리스트 이미지파일 -->
	<select id="productListImg" parameterType="int" resultType="Image">
			select img.path, img.ori_name, img.type, pro.category_no
			from tb_image img
			inner join tb_product pro
			on img.product_id = pro.product_id
            where pro.category_no = #{categoryNo} and img.type = 'sum'
			group by img.product_id

	</select>
	
	<!-- 메인 이미지 파일 --> 
	<select id="mainSelectProductFile" parameterType="String" resultType="Image">
			select * from tb_image
				where type = 'sum'
			group by product_id
	</select>

</mapper>